import{N as ye}from"./index.aa5f180a.js";import{S as ke}from"./search-bar.a4389180.js";import{e as G,G as H,n as se,F as ae,m as ge,g as M,y as S,D as ne,ap as Ce,j as E,q as be,aU as Se,C as we,b as f,H as $e,S as Ie,ah as xe,x as Pe,ax as Z,af as Te,z as oe,aF as De,aq as Ve,az as Re,aA as Ae,E as le,I as Ee,i as U,f as Oe,r as We,h as Ne,ar as Be,_ as V,K as q,o as c,c as v,a as m,w as T,a3 as $,a4 as P,a8 as I,aJ as ce,aV as O,t as D,a7 as x,a2 as F,Y as j,Z as J,aW as He,d as Fe,aX as Ge,aY as Me,u as Ue}from"./index.3fe0e41c.js";import{C as ze,S as Le}from"./index.af447c43.js";import{u as Ke}from"./use-id.b8830f5a.js";import{a as Ye,m as z}from"./index.87fb0a01.js";import{P as qe,s as je}from"./function-call.a02c8920.js";import{S as Je}from"./index.d84d70ad.js";import"./index.96506a47.js";import"./index.f08351aa.js";const[ie,N]=G("dropdown-menu"),Qe={overlay:H,zIndex:se,duration:ae(.2),direction:ge("down"),activeColor:String,closeOnClickOutside:H,closeOnClickOverlay:H},re=Symbol(ie);var Ze=M({name:ie,props:Qe,setup(e,{slots:d}){const n=Ke(),a=S(),t=S(),s=S(0),{children:_,linkChildren:C}=ne(re),k=Ce(a),o=E(()=>_.some(i=>i.state.showWrapper)),u=E(()=>{if(o.value&&be(e.zIndex))return{zIndex:+e.zIndex+1}}),y=()=>{e.closeOnClickOutside&&_.forEach(i=>{i.toggle(!1)})},p=()=>{if(t.value){const i=Ie(t);e.direction==="down"?s.value=i.bottom:s.value=xe.value-i.top}},l=()=>{o.value&&p()},h=i=>{_.forEach((r,w)=>{w===i?(p(),r.toggle()):r.state.showPopup&&r.toggle(!1,{immediate:!0})})},b=(i,r)=>{const{showPopup:w}=i.state,{disabled:g,titleClass:A}=i;return f("div",{id:`${n}-${r}`,role:"button",tabindex:g?void 0:0,class:[N("item",{disabled:g}),{[$e]:!g}],onClick:()=>{g||h(r)}},[f("span",{class:[N("title",{down:w===(e.direction==="down"),active:w}),A],style:{color:w?e.activeColor:""}},[f("div",{class:"van-ellipsis"},[i.renderTitle()])])])};return C({id:n,props:e,offset:s}),Se(a,y),we("scroll",l,{target:k,passive:!0}),()=>{var i;return f("div",{ref:a,class:N()},[f("div",{ref:t,style:u.value,class:N("bar",{opened:o.value})},[_.map(b)]),(i=d.default)==null?void 0:i.call(d)])}}});const[Xe,B]=G("dropdown-item"),et={title:String,options:Pe(),disabled:Boolean,teleport:[String,Object],lazyRender:H,modelValue:Z,titleClass:Z};var tt=M({name:Xe,inheritAttrs:!1,props:et,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:d,slots:n,attrs:a}){const t=Te({showPopup:!1,transition:!0,showWrapper:!1}),{parent:s,index:_}=oe(re);if(!s)return;const C=r=>()=>d(r),k=C("open"),o=C("close"),u=C("opened"),y=()=>{t.showWrapper=!1,d("closed")},p=r=>{e.teleport&&r.stopPropagation()},l=(r=!t.showPopup,w={})=>{r!==t.showPopup&&(t.showPopup=r,t.transition=!w.immediate,r&&(t.showWrapper=!0))},h=()=>{if(n.title)return n.title();if(e.title)return e.title;const r=e.options.find(w=>w.value===e.modelValue);return r?r.text:""},b=r=>{const{activeColor:w}=s.props,g=r.value===e.modelValue,A=()=>{t.showPopup=!1,r.value!==e.modelValue&&(d("update:modelValue",r.value),d("change",r.value))},R=()=>{if(g)return f(Ee,{class:B("icon"),color:w,name:"success"},null)};return f(ze,{role:"menuitem",key:r.value,icon:r.icon,title:r.text,class:B("option",{active:g}),style:{color:g?w:""},tabindex:g?0:-1,clickable:!0,onClick:A},{value:R})},i=()=>{const{offset:r}=s,{zIndex:w,overlay:g,duration:A,direction:R,closeOnClickOverlay:Q}=s.props,L=Ve(w);return R==="down"?L.top=`${r.value}px`:L.bottom=`${r.value}px`,Re(f("div",le({style:L,class:B([R]),onClick:p},a),[f(qe,{show:t.showPopup,"onUpdate:show":W=>t.showPopup=W,role:"menu",class:B("content"),overlay:g,position:R==="down"?"top":"bottom",duration:t.transition?A:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${s.id}-${_.value}`,closeOnClickOverlay:Q,onOpen:k,onClose:o,onOpened:u,onClosed:y},{default:()=>{var W;return[e.options.map(b),(W=n.default)==null?void 0:W.call(n)]}})]),[[Ae,t.showWrapper]])};return Ye({state:t,toggle:l,renderTitle:h}),()=>e.teleport?f(De,{to:e.teleport},{default:()=>[i()]}):i()}});const ue=U(tt),de=U(Ze),[pe,st]=G("sidebar"),_e=Symbol(pe),at={modelValue:ae(0)};var nt=M({name:pe,props:at,emits:["change","update:modelValue"],setup(e,{emit:d,slots:n}){const{linkChildren:a}=ne(_e),t=()=>+e.modelValue;return a({getActive:t,setActive:_=>{_!==t()&&(d("update:modelValue",_),d("change",_))}}),()=>{var _;return f("div",{role:"tablist",class:st()},[(_=n.default)==null?void 0:_.call(n)])}}});const ot=U(nt),[lt,X]=G("sidebar-item"),ct=Oe({},We,{dot:Boolean,title:String,badge:se,disabled:Boolean,badgeProps:Object});var it=M({name:lt,props:ct,emits:["click"],setup(e,{emit:d,slots:n}){const a=Ne(),{parent:t,index:s}=oe(_e);if(!t)return;const _=()=>{e.disabled||(d("click",s.value),t.setActive(s.value),a())};return()=>{const{dot:C,badge:k,title:o,disabled:u}=e,y=s.value===t.getActive();return f("div",{role:"tab",class:X({select:y,disabled:u}),tabindex:u?void 0:0,"aria-selected":y,onClick:_},[f(Be,le({dot:C,class:X("text"),content:k},e.badgeProps),{default:()=>[n.title?n.title():o]})])}}});const rt=U(it);function ut(){return z.get({url:"/search/top"})}function dt(){return z.get({url:"/search/result"})}const ve="http://localhost:5173/api",me="1657957399020",he="1657957399023KiYJenCT_6Th0R8QmkS3QDMD3wNhFaJsfn97x";function pt(){return z.post({url:ve+`/bnbapp-node-h5/h5/suggest/guessulike/bnb?_apitsp=${me}&_fasTraceId=${he}
    `,method:"post",data:{cityId:45,keywordTryRecommend:2}})}function _t(e){return z.post({url:ve+`/bnbapp-node-h5/h5/keyword/keywordsearchsuggest/bnb?_apitsp=${me}&_fasTraceId=${he}
    `,method:"post",data:{cityId:45,keyword:e,sourceCode:702}})}const vt={key:0,class:"side-bar"},mt={class:"side-menu"},ht={class:"content"},ft=["onClick"],yt={class:"name ellipsis-text-1"},kt={key:0,class:"desp"},gt={key:1,class:"sub-side-panel"},Ct={class:"sub-side-bar"},bt={class:"sub-content"},St=["onClick"],wt={class:"name ellipsis-text-1"},$t={key:0,class:"desp"},It={__name:"index",props:{menuData:{type:Array,default:()=>[]}},emits:["itemClick"],setup(e,{emit:d}){const n=e,a=S(0),t=S(0),s=S([]);q(()=>n.menuData,(p,l)=>{s.value=p},{immediate:!0});const _=E(()=>{let p=s.value[a.value].subGroups||[],l=[];return p.length&&(l=p[t.value]||{}),l=l.items||[],l}),C=E(()=>s.value[a.value].subGroups||[]),k=p=>console.log(`\u6807\u7B7E\u540D ${a.value}`),o=p=>console.log(`\u4E8C\u7EA7\u6807\u7B7E\u540D ${t.value}`),u=(p,l)=>{s.value[p]&&((s.value[p].items||[]).forEach((b,i)=>{b.isSelect=i===l}),d("itemClick",{sideDatas:s.value,currentSideActive:p,index:l}))},y=p=>{s.value[a.value]&&(((s.value[a.value].subGroups||[])[t.value].items||[]).forEach((b,i)=>{b.isSelect=i===p}),d("itemClick",{sideDatas:s.value,currentSideActive:a,currentSubSideActive:t,index:p}))};return(p,l)=>{const h=rt,b=ot;return s.value.length?(c(),v("div",vt,[m("div",mt,[f(b,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),onChange:k},{default:T(()=>[(c(!0),v($,null,P(s.value,(i,r)=>(c(),I(h,{key:r,title:i.label},null,8,["title"]))),128))]),_:1},8,["modelValue"])]),m("div",ht,[ce(p.$slots,"content",{items:s.value[a.value].items,subGroups:s.value[a.value].subGroups},()=>[s.value[a.value].items?(c(!0),v($,{key:0},P(s.value[a.value].items,(i,r)=>(c(),v("div",{key:r,class:O(["list-item",i.isSelect?"active":""]),onClick:w=>u(a.value,r)},[m("div",yt,D(i.label),1),i.percentageUser?(c(),v("span",kt,D(i.percentageUser),1)):x("",!0)],10,ft))),128)):x("",!0),F(C).length?(c(),v("div",gt,[m("div",Ct,[f(b,{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=i=>t.value=i),onChange:o},{default:T(()=>[(c(!0),v($,null,P(s.value[a.value].subGroups,(i,r)=>(c(),I(h,{key:r,title:i.label},null,8,["title"]))),128))]),_:1},8,["modelValue"])]),m("div",bt,[(c(!0),v($,null,P(F(_),(i,r)=>(c(),v("div",{key:r,class:O(["list-item",i.isSelect?"active":""]),onClick:w=>y(r)},[m("div",wt,D(i.label),1),i.percentageUser?(c(),v("span",$t,D(i.percentageUser),1)):x("",!0)],10,St))),128))])])):x("",!0)],!0)])])):x("",!0)}}},ee=V(It,[["__scopeId","data-v-f8719e62"]]);const xt={class:"view-house-btns"},Pt={__name:"index",emits:["clear","viewClick"],setup(e,{emit:d}){const n=()=>{d("clear")},a=()=>{d("viewClick")};return(t,s)=>(c(),v("div",xt,[m("div",{class:"clear",onClick:n},"\u6E05\u7A7A"),m("div",{class:"view-house",onClick:a},"\u67E5\u770B\u623F\u5C4B(220\u5957)")]))}},K=V(Pt,[["__scopeId","data-v-f2549b5a"]]);const Tt=e=>(j("data-v-d4caa3a9"),e=e(),J(),e),Dt={class:"dropdown-bar-panel-content"},Vt={class:"dropdown-bar-panel-content"},Rt=Tt(()=>m("p",{class:"list-content"},"\u6B63\u5728\u5F00\u53D1\u4E2D...",-1)),At={__name:"index",props:{itemsData:{type:Array,default:()=>[]}},setup(e){const d={},n=S(0),a=[{text:"\u6B22\u8FCE\u5EA6\u6392\u5E8F",value:0},{text:"\u597D\u8BC4\u4F18\u5148",value:1},{text:"\u70B9\u8BC4\u6570\u591A->\u5C11",value:2},{text:"\u4F4E\u4EF7\u4F18\u5148",value:3},{text:"\u9AD8\u4EF7\u4F18\u5148",value:4}],t=k=>{k&&(d[k.title]=k)},s=k=>{var o;(o=d[k])==null||o.toggle()},_=k=>{var o;(o=d[k])==null||o.toggle()},C=k=>{console.log(k)};return(k,o)=>{const u=ue,y=de;return c(),I(y,null,{default:T(()=>[(c(!0),v($,null,P(e.itemsData,(p,l)=>(c(),v($,null,[p.gType===2?(c(),I(u,{key:0,title:"\u4F4D\u7F6E",ref_for:!0,ref:t},{default:T(()=>[m("div",Dt,[f(ee,{class:"top",menuData:p.subGroups,onItemClick:C},null,8,["menuData"]),f(K,{class:"bottom",onClear:o[0]||(o[0]=h=>s("\u4F4D\u7F6E")),onViewClick:o[1]||(o[1]=h=>_("\u4F4D\u7F6E"))})])]),_:2},1024)):x("",!0),p.gType===4?(c(),I(u,{key:1,modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=h=>n.value=h),options:a},null,8,["modelValue"])):x("",!0),p.gType===1?(c(),I(u,{key:2,title:"\u7B5B\u9009",ref_for:!0,ref:t},{default:T(()=>[m("div",Vt,[f(ee,{class:"top",menuData:p.subGroups},{content:T(h=>[Rt]),_:2},1032,["menuData"]),f(K,{class:"bottom",onClear:o[3]||(o[3]=h=>s("\u7B5B\u9009")),onViewClick:o[4]||(o[4]=h=>_("\u7B5B\u9009"))})])]),_:2},1024)):x("",!0)],64))),256))]),_:1})}}},Et=V(At,[["__scopeId","data-v-d4caa3a9"]]);const Ot={__name:"index",props:{title:{type:String,default:"\u591A\u4EBA\u5165\u4F4F"},borderColor:{type:String,default:"white"},borderActiveColor:{type:String,default:"#ff9645"},borderWidth:{type:String,default:"1px"},type:{type:String,default:"default"},active:{type:Boolean,default:!1}},emits:["tagClick"],setup(e,{emit:d}){const n=e;He(t=>({"39ba605d":n.borderWidth,"38a361fa":n.borderColor}));const a=()=>{d("tagClick",n.title)};return(t,s)=>(c(),v("div",{class:O(["tab-select-item",e.type,e.active?"active":""]),onClick:a},D(e.title),3))}},Y=V(Ot,[["__scopeId","data-v-79c969e3"]]);const Wt={class:"tab-select"},Nt={class:"drow-content"},Bt={__name:"index",props:{itemsData:{type:Array,default:()=>[]}},setup(e){const d=e,n={},a=S([]);S(0),q(()=>d.itemsData,(o,u)=>{a.value=o});const t=o=>{o&&(n[o.title]=o)},s=o=>{var u;(u=n[o])==null||u.toggle()},_=o=>{var u;(u=n[o])==null||u.toggle()},C=(o,u)=>{a.value.forEach((y,p)=>{y.isSelect=p===u})},k=(o,u)=>{a.value.forEach((y,p)=>{p===o&&(y.subFilterItems||[]).forEach((h,b)=>{h.isSelect=b===u})})};return(o,u)=>{const y=ue,p=de;return c(),v("div",Wt,[(c(!0),v($,null,P(a.value,(l,h)=>(c(),v($,{key:h},[l.subFilterItems&&l.subFilterItems.length?(c(),I(p,{key:0},{default:T(()=>[f(y,{title:l.label,ref_for:!0,ref:t},{default:T(()=>[m("div",Nt,[(c(!0),v($,null,P(l.subFilterItems,(b,i)=>(c(),I(Y,{class:"d-item",borderColor:"#979797",borderActiveColor:"#ff9645",active:b.isSelect,title:b.label,onTagClick:r=>k(h,i)},null,8,["active","title","onTagClick"]))),256))]),f(K,{class:"bottom",onClear:b=>s(l.label),onViewClick:b=>_(l.label)},null,8,["onClear","onViewClick"])]),_:2},1032,["title"])]),_:2},1024)):(c(),I(Y,{key:1,title:l.label,active:l.isSelect,"border-width":"0px",onTagClick:b=>C(l,h)},null,8,["title","active","onTagClick"]))],64))),128))])}}},Ht=V(Bt,[["__scopeId","data-v-eed9526c"]]);const Ft=e=>(j("data-v-3ff47212"),e=e(),J(),e),Gt={class:"search-category"},Mt={class:"title"},Ut={class:"name"},zt=Ft(()=>m("span",{class:"m-name"},"\u5C55\u5F00",-1)),Lt={__name:"index",props:{title:{type:String,default:"\u70ED\u95E8\u641C\u7D22"},itemDatas:{type:Array,default:()=>[]},itemType:{type:String,default:"default"}},emits:["tagClick"],setup(e,{emit:d}){const n=S(!0),a=()=>{n.value=!n.value},t=s=>{d("tagClick",s)};return(s,_)=>(c(),v("div",Gt,[m("div",Mt,[m("span",Ut,D(e.title),1),m("div",{class:"more",onClick:a},[ce(s.$slots,"more",{},()=>[zt,m("i",{class:O(["icon-more",n.value?"down":"up"])},null,2)],!0)])]),m("div",{class:O(["content",n.value?"hidden":"show-all"])},[(c(!0),v($,null,P(e.itemDatas,C=>(c(),I(Y,{type:e.itemType,title:C.name,"border-width":"0px",onTagClick:k=>t(C)},null,8,["type","title","onTagClick"]))),256))],2)]))}},te=V(Lt,[["__scopeId","data-v-3ff47212"]]);const Kt={class:"left"},Yt=["innerHTML"],qt={class:"desp"},jt={key:0,class:"active"},Jt={key:0},Qt={class:"right"},Zt={__name:"index",props:{keyWord:{type:String,default:""},name:{type:String,default:""},description:{type:String,default:""},typeName:{type:String,default:""},unitPrice:{type:Number,default:0}},emits:["itemClick"],setup(e,{emit:d}){const n=e,a=E(()=>{let s=n.name;return s&&(s=s.replace(new RegExp(n.keyWord,"ig"),_=>`<font style="color: #ff9645">${n.keyWord}</font>`)),s}),t=()=>{d("itemClick",{name:n.name,typeName:n.typeName})};return(s,_)=>(c(),v("div",{class:"search-result-item",onClick:t},[m("div",Kt,[m("div",{class:"name ellipsis-text-1",innerHTML:F(a)},null,8,Yt),m("span",qt,[e.unitPrice?(c(),v("span",jt,[Fe(" \xA5 "+D(e.unitPrice)+" ",1),e.description?(c(),v("span",Jt," | ")):x("",!0)])):x("",!0),m("span",null,D(e.description),1)])]),m("div",Qt,D(e.typeName),1)]))}},Xt=V(Zt,[["__scopeId","data-v-59923c11"]]);function es(e,d=500,n=!1){let a=null,t=!1;return function(..._){a&&clearTimeout(a),n&&!t?(e.apply(this,_),t=!0):a=setTimeout(()=>{e.apply(this,_),t=!1},d)}}const fe=e=>(j("data-v-e464e436"),e=e(),J(),e),ts={class:"search-panel"},ss={key:0,class:"search-result-panel"},as={key:1,class:"search-category-panel"},ns=fe(()=>m("span",{class:"name"},"\u6E05\u7A7A",-1)),os=fe(()=>m("i",{class:"icon-delete"},null,-1)),ls=[ns,os],cs={__name:"index",props:{searchPanelDatas:{type:Array,default:()=>[]}},emits:["cancel","search","tagClick","resultItemClick"],setup(e,{emit:d}){const n=S(""),a=S([]),t=Ge();t.initSearchHistory(),q(n,es((u,y)=>{!u.trim()||(t.addSearchHistory(u),_t(u).then(p=>{a.value=p.data.suggests||[]}).finally(()=>{}))}));const s=u=>{d("search",u)},_=()=>{d("cancel")},C=(u,y)=>{d("tagClick",{typeName:y.name,keyWord:u.name})},k=u=>{d("resultItemClick",u)},o=()=>{t.clearSearchHistory()};return(u,y)=>{const p=Le;return c(),v("div",ts,[f(p,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=l=>n.value=l),"show-action":"",shape:"round",placeholder:"\u641C\u7D22\u5E7F\u5DDE\u7684\u666F\u70B9\u3001\u5730\u6807\u3001\u623F\u6E90",onSearch:s,onCancel:_},null,8,["modelValue"]),a.value.length?(c(),v("div",ss,[(c(!0),v($,null,P(a.value,(l,h)=>(c(),I(Xt,{key:h,"key-word":n.value,name:l.name,"type-name":l.itemTypeName,description:l.description,unitPrice:l.unitPrice,onItemClick:k},null,8,["key-word","name","type-name","description","unitPrice"]))),128))])):(c(),v("div",as,[f(te,{title:"\u641C\u7D22\u5386\u53F2",itemDatas:F(t).getSearchHistorys,itemType:"pink",onTagClick:y[1]||(y[1]=l=>C(l,u.item))},{more:T(()=>[m("div",{class:"clear",onClick:o},ls)]),_:1},8,["itemDatas"]),(c(!0),v($,null,P(e.searchPanelDatas,(l,h)=>(c(),v($,{key:h},[l.suggests?(c(),I(te,{key:0,title:l.name,itemDatas:l.suggests,itemType:h===0?"pink":"gray",onTagClick:b=>C(b,l)},null,8,["title","itemDatas","itemType","onTagClick"])):x("",!0)],64))),128))]))])}}},is=V(cs,[["__scopeId","data-v-e464e436"]]);const rs={class:"search"},us={class:"search-nav-bar"},ds={class:"tab-wrapper"},ps={class:"list"},_s={__name:"search",setup(e){je("\u5F00\u53D1\u5B8C\u5584\u4E2D...");const d=Me(),n=Ue(),a="\u641C\u7D22\u535A\u5C14\u5854\u62C9\u7684\u666F\u70B9\u3001\u5730\u6807\u3001\u623F\u6E90",t=S(!1),s=S([]),_=S([]),C=S([]),k=S(d.query),o=S(!1),u=S(a);ut().then(g=>{_.value=g.data.data.allConditions}),dt().then(g=>{s.value=g.data.data}),pt().then(g=>{C.value=g.data});const y=()=>{n.go(-1)},p=()=>{console.log("menuIconClick")},l=()=>{t.value=!0},h=()=>{u.value=a,o.value=!1},b=()=>{t.value=!1},i=()=>{},r=g=>{t.value=!1,g.keyWord?(o.value=!0,u.value=g.keyWord):o.value=!1},w=g=>{r({keyWord:g.name})};return(g,A)=>(c(),v("div",rs,[m("div",us,[f(ye,{class:"",border:!1,onArrowIconClick:y,onMenuIconClick:p},{title:T(()=>[f(ke,{title:k.value.address,"key-word":u.value,"cancel-icon":o.value,onCancelClick:h,onSearchClick:l},null,8,["title","key-word","cancel-icon"])]),_:1}),f(Et,{"items-data":_.value},null,8,["items-data"]),m("div",ds,[f(Ht,{"items-data":s.value.hotFilters},null,8,["items-data"])])]),m("div",ps,[(c(!0),v($,null,P(s.value.items,(R,Q)=>(c(),I(Je,{"item-data":R},null,8,["item-data"]))),256))]),t.value?(c(),I(is,{key:0,searchPanelDatas:C.value.groups,onCancel:b,onSearch:i,onTagClick:r,onResultItemClick:w},null,8,["searchPanelDatas"])):x("",!0)]))}},ws=V(_s,[["__scopeId","data-v-6fb8585c"]]);export{ws as default};
